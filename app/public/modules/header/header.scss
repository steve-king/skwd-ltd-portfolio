$headerDepth: 68px;
$collapsedDepth: 14px;
$animationInitial: $headerDepth - $collapsedDepth;

@mixin headerFill {
  content:"";
  z-index:0;
  background: $white;
  opacity: 0.5;

  position:absolute;
  width:100%;
  height:100%;

  -webkit-backface-visibility:hidden;
  transform: translate3d(0, 0, 0);
  transition:all .4s ease-out; 
}

.header {
  position: relative;
  width:100%;
  z-index:1;
  height: $headerDepth;
  display:flex;
  align-items:center;

  @media (max-width: $phablet - 1){
    &:before {
      @include headerFill;
    }
  }

  &__title {
    // @extend .absolute--fill;
    text-align:center;
    // white-space: nowrap;
    // overflow-x:scroll;
    margin:0;
    flex:1;
    // display:flex;
    // align-items: center;
    // justify-content: center;

    @media (min-width:$phablet) {
      text-align:left;
      // justify-content: flex-start;
      padding-left:$gutter;
    }
  }

  .button {
    position:relative;
    display:inline-block;
    z-index:1;
    width:$headerDepth;
    height:$headerDepth;
    display:flex;
    align-items: center;
    justify-content: center;
    align-self: flex-start;

    .iconButton {
      // flex:0 0;
      @include absoluteCenter;
    }

    // Header with no title
    &:last-child {
      width:100%;
      height:100%;
    }

    @media (min-width:$phablet) {
      &:before {
        @include headerFill;
      }

      &:before {
        transform: translate3d(0, -($animationInitial), 0);
      }

      &:hover {
        &:before {
          transform: translate3d(0, 0, 0);
        }
      }
    }
  }

  @media (min-width: $phablet) {
    &--left {
      width: $headerDepth;
      height:100%;

      .button {
        height:100%;
        &:before {
          transform: translate3d(-($animationInitial), 0, 0);
        }

        &:hover:before {
          transform: translate3d(0, 0, 0);
        }
      }

      .header__title {
        height: $headerDepth;
        position:absolute;
        left: $headerDepth + $gutter + $gutter;
      }
    }
  }

  &--hideButtonDesktop {
    @media (min-width: $phablet) {
      .button, .button:before, .button .iconButton {
        display:none;
      }
    }
  }

  &--hideTitleDesktop {
    @media (min-width: $phablet) {
      .header__title {
        display:none;
      }
    }
  }
}
